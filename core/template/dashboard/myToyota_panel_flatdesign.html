<div id="myToyota_panel_flat_ID" class="eqLogic-widget eqLogic noResize myToyota_panel_flat myToyota_panel_flat_#id# myToyota" style="min-width:1392px !important; max-width:1392px !important; min-height:650px; max-height:4650px; text-align:center; border:#border#; border-radius:#border-radius#; background-color:#background-color#; color:#color#; #style#;" data-eqType="#eqType#" data-translate-category="#translate_category#" data-category="#category#" data-tags="#tags#" data-eqLogic_id="#id#" data-eqLogic_uid="#uid#" data-version="panel">

	<a href="#eqLink#" id="titre" style="#hideEqLogicName#"><img class="logo_car#id#" id="logo" style="vertical-align: bottom !important" src=""><span style="padding-left:10px;"> #name_display#</span></a>
	<!-- <span class="cmd refresh pull-right cursor" data-cmd_id="#refresh_id#" title="Rafraichir" style="margin-right:10px;" onclick="jeedom.cmd.execute({id: #refresh_id#});"><i id="refresh" class="fas fa-sync"></i></span> -->
	
	<div class="container-fluid">
		
		<div>
			
			<!-- Column N°1 -->
			<div class="col-xs-4" id="column" style="width:450px;">
		
				<div class="col-xs-12" id="tile" style="height:250px; width:440px;">
					<div id="picture" style="height: 250px; width:440px;">
						<img id="img_car#id#" src="plugins/myToyota/data/#vehicle_vin#id##.png" style="width:300px; margin-bottom: -40px" />
					</div>
				</div>
				
				<div class="col-xs-2" id="tile" style="height:50px; width:75px;">
					<div id="picture" style="height:35px; width:75px; padding-top: 5px;"><i class="Cmd#presence_id#"></i></div>
					<div id="distance" style="height:15px; width:75px;"><span class="Cmd#distance_id#"></span></div>
				</div>
				
				<div class="col-xs-10" id="tile" style="height:50px; width:355px;">
					<div class="col-xs-1"></div>
					<div class="col-xs-2" style="padding:0px !important;"><span class="icon_oil#id#"><img src="plugins/myToyota/core/img/oil_grey.png" height="50" title="{{Huile moteur OK (à confirmer)}}"/></span></div>
					<div class="col-xs-2" style="padding:0px !important;"><span class="icon_brake#id#"><img src="plugins/myToyota/core/img/brake_grey.png" height="50" title="{{Freins OK}}"/></span></div>
					<div class="col-xs-2" style="padding:0px !important;"><span class="icon_tire#id#"><img src="plugins/myToyota/core/img/tire_grey.png" height="50" title="{{Pression des pneus OK}}"/></span></div>
					<div class="col-xs-2" style="padding:0px !important;"><span class="icon_washingfluid#id#"><img src="plugins/myToyota/core/img/washingfluid_grey.png" height="50" title="Liquide de lave-glace OK}}"/></span></div>
					<div class="col-xs-2" style="padding:0px !important;"><span class="icon_vehicle#id#"><img src="plugins/myToyota/core/img/vehicle_grey.png" height="50" title="{{Statut Véhicule OK}}"/></span></div>
					<div class="col-xs-1"></div>
				</div>
				
				<div class="col-xs-4" id="tile" style="height:140px; width:140px;">
					<div class="col-xs-8" id="titre_tile" style="height:70px;">{{Kilométrage}}</div>
					<div class="col-xs-4" id="icon_tile" style="height:70px;"><i class="fas fa-lg fa-map-signs"></i></div>
					<div class="col-xs-12" id="value_tile" style="height:70px;"><span class="Cmd#mileage_id#"></span><span id="titre_tile"> km</span></div>
				</div>
				
				<!-- affichage si véhicule thermique ou PHEV -->
				<div class="col-xs-4 combustion_engine#id#" id="tile" style="height:140px; width:140px;">
					<div class="col-xs-8 combustion_engine_txt#id#" id="titre_tile" style="height:70px;">{{Niveau carburant}}</div>
					<div class="col-xs-4 combustion_engine_txt#id#" id="icon_tile" style="height:70px;"><i class="fas fa-lg fa-gas-pump"></i></div>
					<div class="col-xs-12 combustion_engine_txt#id#" id="value_tile" style="height:70px;"><span class="Cmd#remaining_fuel_id#"></span><span id="titre_tile"> %</span></div>
				</div>
				
				<div class="col-xs-4 combustion_engine#id#" id="tile" style="height:140px; width:140px;">
					<div class="col-xs-8 combustion_engine_autonom_txt#id#" id="titre_tile" style="height:70px;">{{Autonomie thermique}}</div>
					<div class="col-xs-4 combustion_engine_autonom_txt#id#" id="icon_tile" style="height:70px;"><i class="fas fa-lg fa-map-pin"></i></div>
					<div class="col-xs-12 combustion_engine_autonom_txt#id#" id="value_tile" style="height:70px;"><span class="Cmd#beRemainingRangeFuelKm_id#"></span><span id="titre_tile"> km</span></div>
				</div>
				
				<!-- fin affichage si véhicule thermique ou PHEV -->

				<!-- affichage si véhicule électrique ou PHEV -->
				<div class="col-xs-4 electric_engine#id#" id="tile" style="height:140px; width:140px;">
					<div class="col-xs-8 electric_engine_txt#id#" id="titre_tile" style="height:70px;">{{Batterie}}</div>
					<div class="col-xs-4 electric_engine_txt#id#" id="icon_tile" style="height:70px;"><i class="fas fa-lg fa-car-battery"></i></div>
					<div class="col-xs-12 electric_engine_txt#id#" id="value_tile" style="height:70px;"><span class="Cmd#chargingLevelHv_id#"></span><span id="titre_tile"> %</span></div>				
				</div>
								
				<div class="col-xs-4 electric_engine#id#" id="tile" style="height:140px; width:140px;">
					<div class="col-xs-8 electric_engine_txt#id#" id="titre_tile" style="height:70px;">{{Autonomie électrique}}</div>
					<div class="col-xs-4 electric_engine_txt#id#" id="icon_tile" style="height:70px;"><i class="fas fa-lg fa-map-pin"></i></div>
					<div class="col-xs-12 electric_engine_txt#id#" id="value_tile" style="height:70px;"><span class="Cmd#beRemainingRangeElectric_id#"></span><span id="titre_tile"> km</span></div>				
				</div>
				
				<div class="col-xs-4 electric_engine#id#" id="tile" style="height:140px; width:140px;">
					<div class="col-xs-8 electric_engine_txt#id#" id="titre_tile" style="height:70px;">{{Prise}}</div>
					<div class="col-xs-4 electric_engine_txt#id#" id="icon_tile" style="height:70px;"><i class="fas fa-lg fa-plug"></i></div>
					<div class="col-xs-12 electric_engine_txt#id#" id="value_tile" style="height:70px;"><span class="Cmd#connectorStatus_id#"></span></div>				
				</div>
				
				<div class="col-xs-4 electric_engine#id#" id="tile" style="height:140px; width:140px;">
					<div class="col-xs-8 electric_engine_txt#id#" id="titre_tile" style="height:70px;">{{Recharge}}</div>
					<div class="col-xs-4 electric_engine_txt#id#" id="icon_tile" style="height:70px;"><i class="fas fa-lg fa-charging-station"></i></div>
					<div class="col-xs-12 electric_engine_txt#id#" id="value_tile" style="height:40px;"><span class="Cmd#chargingStatus_id#"></span></div>
					<div class="col-xs-12 electric_engine_txt#id#" id="value_tile_2" style="height:30px;"><span class="Cmd#chargingEndTime_id#"></span></div>					
				</div>
				<!-- fin affichage si véhicule électrique ou PHEV-->

				<div class="col-xs-4 commun_engine#id#" id="tile" style="height:140px; width:140px;">
					<div class="col-xs-8 commun_engine_txt#id#" id="titre_tile" style="height:70px;">{{Autonomie totale}}</div>
					<div class="col-xs-4 commun_engine_txt#id#" id="icon_tile" style="height:70px;"><i class="fas fa-lg fa-map-pin"></i></div>
					<div class="col-xs-12 commun_engine_txt#id#" id="value_tile" style="height:70px;"><span class="Cmd#beRemainingRangeTotal_id#"></span><span id="titre_tile"> km</span></div>				
				</div>
				

			</div>			
			
			<!-- Column N°2 -->
			<div class="col-xs-4" id="column" style="width:450px;">
				
				<div class="col-xs-6" id="tile" style="height:100px; width: 215px;">
					<div class="col-xs-8" id="titre_tile" style="height:50px;">{{Verrouillage}}</div>
					<div class="col-xs-4" id="icon_tile" style="height:50px;"><i class="fas fa-lg fa-unlock-alt"></i></div>
					<div class="col-xs-12" id="value_tile" style="height:50px;"><span class="Cmd#doorLockState_id#"></span></div>
				</div>
				
				<div class="col-xs-6" id="tile" style="height:100px; width:215px;">
					<div class="col-xs-8" id="titre_tile" style="height:50px;">{{Sécurité (+alarme)}}</div>
					<div class="col-xs-4" id="icon_tile" style="height:50px;"><i class="fas fa-lg fa-shield-alt"></i></div>
					<div class="col-xs-12" id="value_tile" style="height:50px;"><span class="securisedMode#id#"></span></div>
				</div>
				
				<div class="col-xs-6 all_info_display#id#" id="tile" style="height:100px; width:215px;">
					<div class="col-xs-8" id="titre_tile" style="height:50px;">{{Toutes les portes}}</div>
					<div class="col-xs-4" id="icon_tile" style="height:50px;"><img src="plugins/myToyota/core/img/doors_blue.png" style="height:24px"></div>
					<div class="col-xs-12" id="value_tile" style="height:50px;"><span class="Cmd#allDoorsState_id#"></span></div>
				</div>
				
				<div class="col-xs-6 all_info_display#id#" id="tile" style="height:100px; width:215px;">
					<div class="col-xs-8" id="titre_tile" style="height:50px;">{{Toutes les fenêtres}}</div>
					<div class="col-xs-4" id="icon_tile" style="height:50px;"><img src="plugins/myToyota/core/img/windows_blue.png" style="height:24px"></div>
					<div class="col-xs-12" id="value_tile" style="height:50px;"><span class="Cmd#allWindowsState_id#"></span></div>
				</div>
				
				<div class="col-xs-12" id="tile" style="height:420px; width:440px;">
					<div class="col-xs-2" id="icon_tile" style="height:70px;"><i class="fas fa-lg fa-info"></i></div>
					<div class="col-xs-10" id="titre_tile_2" style="height:70px;">{{Informations}}</div>
					
					<div class="col-xs-12" id="row_doors">
						<div class="col-xs-6" id="text_doors">{{Capot}} </div>
						<div class="col-xs-6" id="value_doors" style="text-align:left"><span class="Cmd#hood_state_id#"></span></div>
					</div>
					
					<div class="col-xs-4" id="column">
						<div class="col-xs-12" id="row_doors" style="height: 20px;"></div>
						<div class="col-xs-12" id="row_doors" style="height: 20px;">
							<div class="col-xs-6 pressure_info#id#" id="text_doors">{{Pression}}</div>
							<div class="col-xs-6 pressure_info#id#" id="value_doors"><span class="Cmd#tireFrontLeft_target_id#"><span class="Cmd#tireFrontLeft_pressure_id#"></span></span></div>
						</div>
						<div class="col-xs-12" id="row_doors" style="height: 25px;"></div>
						<div class="col-xs-12" id="row_doors">
							<div class="col-xs-6" id="text_doors">{{Porte}}</div>
							<div class="col-xs-6" id="value_doors"><span class="Cmd#doorDriverFront_id#"></span></div>
						</div>
						<div class="col-xs-12" id="row_doors">
							<div class="col-xs-6" id="text_doors">{{Fenêtre}}</div>
							<div class="col-xs-6" id="value_doors"><span class="Cmd#windowDriverFront_id#"></span></div>
						</div>
						<div class="col-xs-12" id="row_doors" style="height: 25px;"></div>
						<div class="col-xs-12" id="row_doors">
							<div class="col-xs-6" id="text_doors">{{Porte}}</div>
							<div class="col-xs-6" id="value_doors"><span class="Cmd#doorDriverRear_id#"></span></div>
						</div>
						<div class="col-xs-12" id="row_doors">
							<div class="col-xs-6" id="text_doors">{{Fenêtre}}</div>
							<div class="col-xs-6" id="value_doors"><span class="Cmd#windowDriverRear_id#"></span></div>
						</div>
						<div class="col-xs-12" id="row_doors" style="height: 25px;"></div>
						<div class="col-xs-12" id="row_doors" style="height: 20px;">
							<div class="col-xs-6 pressure_info#id#" id="text_doors">{{Pression}}</div>
							<div class="col-xs-6 pressure_info#id#" id="value_doors"><span class="Cmd#tireRearLeft_target_id#"><span class="Cmd#tireRearLeft_pressure_id#"></span></span></div>
						</div>
					</div>
					
					<div class="col-xs-4" id="picture" style="margin:20px 0px 20px 0px">
						<img src="plugins/myToyota/core/img/widget_car.png" style="height:200px; filter:opacity(50%)"/>
					</div>
					
					<div class="col-xs-4" id="column">
						<div class="col-xs-12" id="row_doors" style="height: 20px;"></div>
						<div class="col-xs-12" id="row_doors" style="height: 20px;">
							<div class="col-xs-6 pressure_info#id#" id="text_doors">{{Pression}}</div>
							<div class="col-xs-6 pressure_info#id#" id="value_doors"><span class="Cmd#tireFrontRight_target_id#"><span class="Cmd#tireFrontRight_pressure_id#"></span></span></div>
						</div>
						<div class="col-xs-12" id="row_doors" style="height: 25px;"></div>
						<div class="col-xs-12" id="row_doors">
							<div class="col-xs-6" id="text_doors">{{Porte}}</div>
							<div class="col-xs-6" id="value_doors"><span class="Cmd#doorPassengerFront_id#"></span></div>
						</div>
						<div class="col-xs-12" id="row_doors">
							<div class="col-xs-6" id="text_doors">{{Fenêtre}}</div>
							<div class="col-xs-6" id="value_doors"><span class="Cmd#windowPassengerFront_id#"></span></div>
						</div>
						<div class="col-xs-12" id="row_doors" style="height: 25px;"></div>
						<div class="col-xs-12" id="row_doors">
							<div class="col-xs-6" id="text_doors">{{Porte}}</div>
							<div class="col-xs-6" id="value_doors"><span class="Cmd#doorPassengerRear_id#"></span></div>
						</div>
						<div class="col-xs-12" id="row_doors">
							<div class="col-xs-6" id="text_doors">{{Fenêtre}}</div>
							<div class="col-xs-6" id="value_doors"><span class="Cmd#windowPassengerRear_id#"></span></div>
						</div>
						<div class="col-xs-12" id="row_doors" style="height: 25px;"></div>
						<div class="col-xs-12" id="row_doors" style="height: 20px;">
							<div class="col-xs-6 pressure_info#id#" id="text_doors">{{Pression}}</div>
							<div class="col-xs-6 pressure_info#id#" id="value_doors"><span class="Cmd#tireRearRight_target_id#"><span class="Cmd#tireRearRight_pressure_id#"></span></span></div>
						</div>
					</div>
					
					<div class="col-xs-12" id="row_doors">
						<div class="col-xs-6" id="text_doors">{{Toit ouv.}}</div>
						<div class="col-xs-6" id="value_doors" style="text-align:left"><span class="Cmd#moonroof_state_id#"></span></div>
					</div>
					
					<div class="col-xs-12" id="row_doors">
						<div class="col-xs-6" id="text_doors">{{Coffre}}</div>
						<div class="col-xs-6" id="value_doors" style="text-align:left"><span class="Cmd#trunk_state_id#"></span></div>
					</div>
								
				</div>
				
				<div class="col-xs-12" id="tile" style="height:110px; width:440px;">
					
					<div class="col-xs-2" id="icon_tile" style="height:50px;"><i class="fas fa-lg fa-cogs"></i></div>
					<div class="col-xs-10" id="titre_tile_2" style="height:50px;">{{Actions}}</div>

					<button class="btn cmd action" data-cmd_id="#refresh_id#" title="{{Rafraichir}}" onclick="jeedom.cmd.execute({id: #refresh_id#});"><i class="fa-lg icon fas fa-sync-alt"></i></button>
					<button class="btn cmd action" data-cmd_id="#doorLock_id#" title="{{Verrouiller}}" onclick="jeedom.cmd.execute({id: #doorLock_id#});"><i class="fa-lg icon fas fa-lock"></i></button>
					<button class="btn cmd action" data-cmd_id="#doorUnlock_id#" title="{{Déverrouiller}}" onclick="jeedom.cmd.execute({id: #doorUnlock_id#});"><i class="fa-lg icon fas fa-lock-open"></i></button>
					<button class="btn cmd action" data-cmd_id="#climateNow_id#" title="{{Start Clim}}" onclick="jeedom.cmd.execute({id: #climateNow_id#});"><i class="fa-lg icon fas fa-fan"></i></button>
					<button class="btn cmd action" data-cmd_id="#stopClimateNow_id#" title="{{Stop Clim}}" onclick="jeedom.cmd.execute({id: #stopClimateNow_id#});"><i class="fa-lg icon fas fa-ban"></i></button>
					<!--
					<button id="charge_btn#id#" class="btn cmd action" data-cmd_id="#chargeNow_id#" title="Charger (non fonctionnel)" onclick="jeedom.cmd.execute({id: #chargeNow_id#});"><i class="fa-lg icon fas fa-charging-station"></i></button>
					<button id="stopcharge_btn#id#" class="btn cmd action" data-cmd_id="#stopChargeNow_id#" title="Stop Charger (non fonctionnel)" onclick="jeedom.cmd.execute({id: #stopChargeNow_id#});"><i class="fa-lg icon fas fa-power-off"></i></button>
					-->
					<button class="btn cmd action" data-cmd_id="#hazardOn_id#" title="{{Feux de détresse}}" onclick="jeedom.cmd.execute({id: #hazardOn_id#});"><i class="fa-lg icon fas fa-exclamation-triangle"></i></button>
					<button class="btn cmd action" data-cmd_id="#hazardOff_id#" title="{{Stop feux de détresse}}" onclick="jeedom.cmd.execute({id: #hazardOff_id#});"><i class="fa-lg icon fas fa-exclamation-circle"></i></button>
					<button class="btn cmd action" data-cmd_id="#hornBlow_id#" title="{{Klaxonner}}" onclick="jeedom.cmd.execute({id: #hornBlow_id#});"><i class="fa-lg icon fas fa-volume-up"></i></button>
					<!--
					<button class="btn cmd action" data-cmd_id="#stopHornBlow_id#" title="Stop klaxonner" onclick="jeedom.cmd.execute({id: #hornBlow_id#});"><i class="fa-lg icon fas fa-volume-mute"></i></button>
					-->
					<button class="btn cmd action" data-cmd_id="#vehicleFinder_id#" title="{{Recherche véhicule}}"><i class="fa-lg icon fas fa-map-marked"></i></button>
					<script>
						$('.cmd[data-cmd_id=#vehicleFinder_id#]').on('click', function () {
							$('#md_modal').dialog({title: "{{Recherche Véhicule}}"});
							$('#md_modal').load('index.php?v=d&plugin=myToyota&modal=VehicleFinder.myToyota&eqLogic_id='+'#id#').dialog('open');
						});
					</script>
					<button class="btn cmd action" data-cmd_id="#sendPOI_id#" title="{{Envoi POI (non fonctionnel)}}"><i class="fa-lg icon fas fa-map-marker-alt"></i></button>
					<script>
						/*
						$('.cmd[data-cmd_id=#sendPOI_id#]').on('click', function () {
							$('body').append('<div id="mod_sendPOI" style="overflow-x: hidden; overflow-y: hidden;"/>');
							$("#mod_sendPOI").dialog({
									title: "Envoi POI",
									closeText: '',
									autoOpen: false,
									modal: true,
									height: 240,
									width: 447
							});
							jQuery.ajaxSetup({async: false});
							$('#mod_sendPOI').load('index.php?v=d&plugin=myToyota&modal=SendPOI.myToyota&eqLogic_id='+'#id#');
							jQuery.ajaxSetup({async: true});
															
							$('#mod_sendPOI').dialog('open');
						});
						*/
					</script>
				</div>
				
			</div>	
			
			<!-- Column N°3 -->
			<div class="col-xs-4" id="column" style="width:450px;">
				
				<div class="col-xs-12" id="tile" style="height:420px; width:440px;">
					<div class="col-xs-2" id="icon_tile" style="height:50px;"><i class="fas fa-lg fa-wrench"></i></div>
					<div class="col-xs-10" id="titre_tile_2" style="height:50px;">{{Services - Entretiens}}</div>
					<div id="liste_msg" class="label Cmd#vehicleMessages_id# table_message#id#"></div>
				</div>
				
				<div class="col-xs-12" id="tile" style="height:330px; width:440px;">
					<div class="col-xs-2" id="icon_tile" style="height:50px;"><i class="fas fa-lg fa-location-arrow"></i></div>
					<div class="col-xs-10" id="titre_tile_2" style="height:50px;">{{Localisation}}</div>
					<div id="location">
						<iframe class="myMap" id="myFrame#id#" style="height:255px;" src="https://maps.google.com/maps?hl=fr&ie=utf8&output=embed&q=#gps_coordinates#"></iframe>
					</div>
				</div>
			
			</div>

			<!-- Charts -->
			<div class="col-xs-6" id="column" style="width:675px;">
				<div class="col-xs-12" id="tile" style="width:665px;">
					<div class="col-xs-12" id="km_chart#id#"></div>
				</div>
			</div>
			
			<div class="col-xs-6 fuel_chart#id#" id="column" style="width:675px;">
				<div class="col-xs-12" id="tile" style="width:665px;">
					<div class="col-xs-12" id="fuel_chart#id#"></div>
				</div>
			</div>
			
			<div class="col-xs-6 charge_chart#id#" id="column" style="width:675px;">
				<div class="col-xs-12" id="tile" style="width:665px;">
					<div class="col-xs-12" id="charge_chart#id#"></div>
				</div>
			</div>
			
			<div class="col-xs-6 charge_sessions#id#" id="column" style="width:675px;">
				<div class="col-xs-12" id="tile" style="height:400px; width:665px;">
					<div class="col-xs-12" id="titre_graph" style="height:35px;">{{Statistiques de charge - Mois en cours}}</div>
					<div class="col-xs-12" id="soustitre_graph" style="height:20px;"><span class="Cmd#totalEnergyCharged_id#"></span></div>
					<div id="table_sessions" class="label Cmd#chargingSessions_id# table_sessions#id#"></div>
				</div>
			</div>

			<!-- Tableaux -->
            <div class="col-xs-12 tab_stat" id="column" style="width: 1350px;">
                <div class="col-xs-12 FONC_trajet" id="titre_tile_2">{{Statistiques et Trajets}}
                </div>
                <!-- Onglets -->
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="TAB_hyd" id="TAB_hyd"><a href="#eqlogictabhyd" aria-controls="home" role="tab" data-toggle="tab"><i class="fas fa-tachometer-alt"></i> {{Trajets Hybride}} </a></li>
                    <li role="presentation" class="TAB_ess" id="TAB_ess"><a href="#eqlogictabess" aria-controls="home" role="tab" data-toggle="tab"><i class="fas fa-tachometer-alt"></i> {{Trajets}}</a></li>
                    <li role="presentation" class="TAB_elec" id="TAB_elec"><a href="#eqlogictabelec" aria-controls="home" role="tab" data-toggle="tab"><i class="fas fa-tachometer-alt"></i> {{Trajets Electrique}}</a></li>
                    <li role="presentation" class="TAB_phev" id="TAB_phev"><a href="#eqlogictabphev" aria-controls="home" role="tab" data-toggle="tab"><i class="fas fa-tachometer-alt"></i> {{Trajets PHEV}}</a></li>
                    <li role="presentation" class="TAB_charge" id="TAB_charge"><a href="#eqlogictabcharge" aria-controls="home" role="tab" data-toggle="tab"><i class="fas jeedom-prise"></i> {{Charges}} </a></li>
                </ul>
                <div class="tab-content">
                    <!-- Onglet des trajets HYD -->
			        <div role="tabpanel" class="tab-pane tab-pane-hyd" id="eqlogictabhyd">
							<div class="col-xs-12 FONC_trajet_hyd" id="titre_tile">{{Statistiques}}
							</div>
                            <div class="col-xs-12 myToyota_panel_flat_tile FONC_trajet_hyd">
								<div class="col-xs-12 myToyota_panel_flat_tile FONC_trajet_hyd">
									<div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{sur 7 jours glissants}}</div>
									<div>
										<div class="col-xs-1 myToyota_panel_flat_tile " style="width:12%;">
											<div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Nombre trajets}}</div>
											<center><span class="FONC_hyd_trajets" id="FONC_hyd_trajets">---</span></center>
										</div>
										<div class="col-xs-1 myToyota_panel_flat_tile " style="width:12%;">
											<div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Durée totale}}</div>
											<center><span class="FONC_hyd_duree_totale" id="FONC_hyd_duree_totale">---</span></center>
										</div>
										<div class="col-xs-2 myToyota_panel_flat_tile " style="width:12%;">
											<div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Distance total}}e</div>
											<center><span class="FONC_hyd_distance_totale" id="FONC_hyd_distance_totale">---</span> km</center>
										</div>
										<div class="col-xs-2 myToyota_panel_flat_tile " style="width:12%;">
											<div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Vitesse moyenne}}</div>
											<center><span class="FONC_hyd_vitesse_moyenne" id="FONC_hyd_vitesse_moyenne">---</span> km/h</center>
										</div>
										<div class="col-xs-2 myToyota_panel_flat_tile " style="width:12%;">
											<div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Durée en ev}}</div>
											<center><span class="FONC_hyd_duree_ev" id="FONC_hyd_duree_ev">---</span></center>
										</div>
										<div class="col-xs-1 myToyota_panel_flat_tile " style="width:12%;">
											<div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Distance en ev}}</div>
											<center><span class="FONC_hyd_distance_ev" id="FONC_hyd_distance_ev">---</span> km</center>
										</div>
										<div class="col-xs-2 myToyota_panel_flat_tile " style="width:12%;">
											<div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Conso Carburant}}</div>
											<center><span class="FONC_hyd_conso_essence" id="FONC_hyd_conso_essence">---</span> l</center>
										</div>
										<div class="col-xs-1 myToyota_panel_flat_tile " style="width:12%;">
											<div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Conso moyenne}}</div>
											<center><span class="FONC_hyd_conso_moy" id="FONC_hyd_conso_moy">---</span> l/100</center>
										</div>
									</div>
								</div>

								<pre><br></pre>
								<div class="myToyota_panel_flat_titre_tile " id="titre_tile2">{{Trajets en Hybride des 7 derniers jours}}
                                </div>
								<br>
                                <div class="tableHyd">
                                    <table class="fixed_header tableCmdHyd" id="table_cmd_hyd">
                                    </table>
                                </div>
                            </div>
                            
                    </div>
                    <!-- Onglet des trajets essence -->
			        <div role="tabpanel" class="tab-pane tab-pane-ess" id="eqlogictabess">
                            
						<div class="col-xs-12 myToyota_panel_flat_tile FONC_trajet_ess">
							<div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Trajets essence}}
							</div>
							<div >
								<table class="fixed_header tableCmdEss" id="table_cmd_ess">
								</table>
							</div>
						</div>
						
					</div>
                    <!-- Onglet des trajets électrique -->
			        <div role="tabpanel" class="tab-pane tab-pane-elec" id="eqlogictabelec">
                            
						<div class="col-xs-12 myToyota_panel_flat_tile FONC_trajet_elec">
							<div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Trajets électrique}}
							</div>
							<div >
								<table class="fixed_header tableCmdElec" id="table_cmd_elec">
								</table>
							</div>
						</div>
						
					</div>
                    <!-- Onglet des trajets phev-->
			        <div role="tabpanel" class="tab-pane tab-pane-phev" id="eqlogictabphev">
                            
						<div class="col-xs-12 myToyota_panel_flat_tile FONC_trajet_phev">
							<div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Trajets PHEV}}
							</div>
							<div >
								<table class="fixed_header tableCmdPhev" id="table_cmd_phev">
								</table>
							</div>
						</div>
						
					</div>
						<!-- Onglet des commandes de l'équipement -->
                    <div role="tabpanel" class="tab-pane tab-pane-charge" id="eqlogictabcharge">
                        <div class="col-xs-12 myToyota_panel_flat_tile FONC_charge">
                            <div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Charges}}</div>
                            <div class="col-xs-12">
                                <div class="col-xs-4 myToyota_panel_flat_tile " style="width:140px;">
                                    <div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Nombre charge}}</div>
                                    <center><span class="FONC_charging_count" id="FONC_charging_count">---</span></center>
                                </div>
                                <div class="col-xs-4 myToyota_panel_flat_tile " style="width:140px;">
                                    <div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Energie totale}}</div>
                                    <center><span class="FONC_charging_total_energy" id="FONC_charging_total_energy">---</span> kw</center>
                                </div>
                                <div class="col-xs-4 myToyota_panel_flat_tile " style="width:140px;">
                                    <div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Durée totale}}</div>
                                    <center><span class="FONC_charging_total_duration" id="FONC_charging_total_duration">---</span></center>
                                </div>
                                <div class="col-xs-4 myToyota_panel_flat_tile " style="width:140px;">
                                    <div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Puissance moyenne de charge}}</div>
                                    <center><span class="FONC_charging_avg_power" id="FONC_charging_avg_power">---</span> W/h</center>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-12 myToyota_panel_flat_tile FONC_charge">
                                <div class="myToyota_panel_flat_titre_tile " id="titre_tile">{{Charges}}
                                </div>
                                <div >
                                    <table class="fixed_headerCharge tableCmdCharge" id="table_cmdCharge">
                                        <thead>
                                            <tr>
                                                <th>{{Date}}</th>
                                                <th>{{Durée}}</th>
                                                <th>{{Energie injectée kw}}</th>
                                                <th>{{Puissance moyenne de charge}}</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            
                                        </tbody>
                                    </table>
                                </div>
                        </div>
                    </div>
                </div>
                
            </div>	





			<!-- Last row -->
			<div class="col-xs-12" id="column">
				<div id="last_update">{{Dernière connexion avec le véhicule :}} <span class="Cmd#lastUpdate_id# state"></span></div>
			</div>
			<div class="col-xs-12" id="column">
				<div id="last_update">{{Dernière interrogation du serveur myToyota (max 30 minutes) :}} <span class="Cmd#lastCommunication_id# state"></span></div>
			</div>

		</div>
		
	</div>
	
	#divGraphInfo#
	
	<script>
    
    //----- Theme colors & optional parameters
	var theme_jeedom;
	var color_icon_closed;
	var color_icon_closed_rgb;
	
	function setTheme#id#() {
		var theme = "";
		var logo = $('.logo_car#id#')[0];
		var source = "";
		var link = document.createElement('link');
		link.type = 'text/css';
		link.rel = 'stylesheet';
		
		if ($('body').attr('data-theme').endsWith('Dark')) {
			link.href = 'plugins/myToyota/core/template/dashboard/myToyota_panel_style_dark.css';
			theme = 'black';
			if ( '#vehicle_brand#id##' == 1 )  {
				source = "plugins/myToyota/core/img/logo_Toyota_white.png";
			}
			if ( '#vehicle_brand#id##' == 2 )  {
				source = "plugins/myToyota/core/img/logo_mini_white.png";
			}
		}
		else if ($('body').attr('data-theme').endsWith('Light')) {
			link.href = 'plugins/myToyota/core/template/dashboard/myToyota_panel_style_light.css';
			theme = 'white';
			if ( '#vehicle_brand#id##' == 1 )  {
				source = "plugins/myToyota/core/img/logo_Toyota_black.png";
			}
			if ( '#vehicle_brand#id##' == 2 )  {
				source = "plugins/myToyota/core/img/logo_mini_black.png";
			}
		}
		if ($('body').attr('data-theme').endsWith('Legacy')) {
			link.href = 'plugins/myToyota/core/template/dashboard/myToyota_panel_style_legacy.css';
			theme = 'legacy';
			if ( '#vehicle_brand#id##' == 1 )  {
				source = "plugins/myToyota/core/img/logo_Toyota_white.png";
			}
			if ( '#vehicle_brand#id##' == 2 )  {
				source = "plugins/myToyota/core/img/logo_mini_white.png";
			}
		}
		document.head.appendChild(link);
		logo.src = source;
		if ( theme != 'legacy' ) { $('.myToyota_panel_flat_#id#')[0].style.setProperty('background-color', theme, 'important'); }
		return theme;
	}

	function timedSetTheme#id#(occurence = 0){
		if ($('.myToyota_panel_flat_#id#').length == 0) {
			return;
		}
		if ( $('body')[0].hasAttribute('data-theme') != true )  {
			occurence++;
			if (occurence > 40){
				return;
			}
			setTimeout( () => { timedSetTheme#id#(occurence); }, 500 );
			return;
		}
		theme_jeedom = setTheme#id#();
		color_icon_closed = setColorIconClosed#id#(theme_jeedom); 
		if (color_icon_closed == 'green') {
			color_icon_closed_rgb = 'rgb(150,201,39)';
		}
		else  {
			color_icon_closed_rgb = color_icon_closed;
		}
	}
	
	function setColorIconClosed#id#(theme)  {
		var color = "";
		if ( '#panel_color_icon_closed#id##' != 'green' )  {
			if ( theme == 'black' || theme == 'legacy') {
				color = 'white';
			}
			else if ( theme == 'white' ) {
				color = 'black';
			}
		}
		else { color = '#panel_color_icon_closed#id##'; }
		return color;
	}
	
	function setDoorsWindowsDisplay#id#()  {
		if ( '#panel_doors_windows_display#id##' == 'icon' )  {
			$('.doors_text#id#').hide();
		}
		if ( '#panel_doors_windows_display#id##' == 'text' || '#panel_doors_windows_display#id##' == '' )  {
			$('.doors_icon#id#').hide();
		}
	}
	
	if ( $('body')[0].hasAttribute('data-theme') == true )  {
		theme_jeedom = setTheme#id#();
		color_icon_closed = setColorIconClosed#id#(theme_jeedom); 
		if ( color_icon_closed == 'green' ) {
			color_icon_closed_rgb = 'rgb(150,201,39)';
		}
		else  {
			color_icon_closed_rgb = color_icon_closed;
		}
	}
	else  {
		timedSetTheme#id#(0);
	}	
		
	$('body').on('changeThemeEvent', function (event,theme) {
		theme_jeedom = setTheme#id#();
		color_icon_closed = setColorIconClosed#id#(theme_jeedom);
		if (color_icon_closed == 'green') { color_icon_closed_rgb = 'rgb(150,201,39)'; }
		else { color_icon_closed_rgb = color_icon_closed; }
		jeedom.cmd.update['#doorDriverFront_id#']({display_value:'#doorDriverFront#'});
		jeedom.cmd.update['#doorDriverRear_id#']({display_value:'#doorDriverRear#'});
		jeedom.cmd.update['#doorPassengerFront_id#']({display_value:'#doorPassengerFront#'});
		jeedom.cmd.update['#doorPassengerRear_id#']({display_value:'#doorPassengerRear#'});
		jeedom.cmd.update['#trunk_state_id#']({display_value:'#trunk_state#'});
		jeedom.cmd.update['#hood_state_id#']({display_value:'#hood_state#'});
		jeedom.cmd.update['#windowDriverFront_id#']({display_value:'#windowDriverFront#'});
		jeedom.cmd.update['#windowDriverRear_id#']({display_value:'#windowDriverRear#'});
		jeedom.cmd.update['#windowPassengerFront_id#']({display_value:'#windowPassengerFront#'});
		jeedom.cmd.update['#windowPassengerRear_id#']({display_value:'#windowPassengerRear#'});
		jeedom.cmd.update['#moonroof_state_id#']({display_value:'#moonroof_state#'});
		setDoorsWindowsDisplay#id#();
	});
	
		//----- Electric / Combustion / Hybrid
		if ( '#vehicle_type#id##' == 'Electrique' )  {
			$('.combustion_engine_txt#id#').hide(); 
			$('.combustion_engine_autonom_txt#id#').hide();
			$('.TAB_hyd').hide();
			$('.TAB_ess').hide();
			$('.TAB_phev').hide();
			$('.TAB_elec').show();
			$('.TAB_charge').show();
			document.getElementById("eqlogictabelec").className += " active";
			document.getElementById("TAB_elec").className += " active";
		}
		if ( '#vehicle_type#id##' == 'Hybride')  {
			$('.electric_engine_txt#id#').hide();
			$('.commun_engine_txt#id#').hide();
			$('.charge_sessions#id#').hide();
			$('.charge_chart#id#').hide();
			$('.TAB_hyd').show();
			$('.TAB_ess').hide();
			$('.TAB_phev').hide();
			$('.TAB_elec').hide();
			$('.TAB_charge').hide();
			document.getElementById("eqlogictabhyd").className += " active";
			document.getElementById("TAB_hyd").className += " active";
		}
		if ( '#vehicle_type#id##' == 'Thermique')  {
			$('.electric_engine_txt#id#').hide();
			$('.commun_engine_txt#id#').hide();
			$('.charge_sessions#id#').hide();
			$('.charge_chart#id#').hide();
			$('.TAB_hyd').hide();
			$('.TAB_elec').hide();
			$('.TAB_ess').show();
			$('.TAB_phev').hide();
			$('.TAB_charge').hide();
			document.getElementById("eqlogictabess").className += " active";
			document.getElementById("TAB_ess").className += " active";
		}
		if ( '#vehicle_type#id##' == 'Hybride Rechargeable')  {
			$('.TAB_hyd').hide();
			$('.TAB_elec').hide();
			$('.TAB_ess').hide();
			$('.TAB_phev').show();
			$('.TAB_charge').show();
			document.getElementById("eqlogictabphev").className += " active";
			document.getElementById("TAB_phev").className += " active";
		}
		if ( '#vehicle_type#id##' != 'Electrique' && '#vehicle_type#id##' != 'Hybride Rechargeable' )  {
			//$('#charge_btn#id#').hide();
			//$('#stopcharge_btn#id#').hide();
		}


	//----- Location
	jeedom.cmd.update['#gps_coordinates_id#'] =function(_options) {
        var myToyota_cmd  = $('#myFrame#id#')[0];
		myToyota_cmd.src = "https://maps.google.com/maps?hl=fr&ie=utf8&output=embed&q="+_options.display_value;
	}
	jeedom.cmd.update['#gps_coordinates_id#']({display_value: '#gps_coordinates#'});
	
	
	//----- Presence
	jeedom.cmd.update['#presence_id#'] =function(_options) {
        if ( _options.display_value == 1 )  {
           	$('.Cmd#presence_id#').empty().append('<i class="fas fa-house-user" style="font-size:1.75em;" title="Présence domicile<br/>Oui"></i>');
		}
		if ( _options.display_value == 0 )  {
           	$('.Cmd#presence_id#').empty().append('<i class="fas fa-house-user" style="font-size:1.75em; color:rgb(185,58,62);" title="Présence domicile<br/>Non"></i>');
		}
	}
	jeedom.cmd.update['#presence_id#']({display_value: '#presence#'});
	
	jeedom.cmd.update['#distance_id#'] =function(_options) {
		if ( parseFloat(_options.display_value) <= parseFloat('#home_distance#id##' ) )  {
			if ( parseFloat(_options.display_value) < 1000 ) { $('.Cmd#distance_id#').empty().append('<span>'+ parseFloat(_options.display_value).toFixed(0) +' m</span>'); }
			else { $('.Cmd#distance_id#').empty().append('<span>'+ (parseFloat(_options.display_value)/1000).toFixed(1) +' km</span>'); }
		}
		else { 
			if ( parseFloat(_options.display_value) < 1000 ) { $('.Cmd#distance_id#').empty().append('<span style="color:rgb(185,58,62) !important;">'+ parseFloat(_options.display_value).toFixed(0) +' m</span>'); }
			else { $('.Cmd#distance_id#').empty().append('<span style="color:rgb(185,58,62) !important;">'+ (parseFloat(_options.display_value)/1000).toFixed(1) +' km</span>'); }
		}
	}
	jeedom.cmd.update['#distance_id#']({display_value: '#distance#'});
	
	
	//----- Lockstate
	jeedom.cmd.update['#doorLockState_id#'] = function(_options) {
        if ( _options.display_value == "UNLOCKED" || _options.display_value == "PARTIALLY_LOCKED" )  {
           	$('.Cmd#doorLockState_id#').empty().append('<span style="color:rgb(185,58,62) !important; font-weight:bold !important">Déverrouillé</span>');
			$('.securisedMode#id#').empty().append('<span style="color:rgb(185,58,62) !important; font-weight:bold !important">Non sécurisé</span>');
        }
       	if ( _options.display_value == "LOCKED" || _options.display_value == "SELECTIVE_LOCKED" )  {
           	$('.Cmd#doorLockState_id#').empty().append('<span>Verrouillé</span>');
			$('.securisedMode#id#').empty().append('<span style="color:rgb(185,58,62) !important; font-weight:bold !important">Non sécurisé</span>');
        }
		if (  _options.display_value == "SECURED" )  {
           	$('.Cmd#doorLockState_id#').empty().append('<span>Verrouillé</span>');
			$('.securisedMode#id#').empty().append('<span>Sécurisé</span>');
        }
		if ( _options.display_value == "UNKNOWN" || _options.display_value == "not available" )  {
           	$('.Cmd#doorLockState_id#').empty().append('<span> - </span>');
			$('.securisedMode#id#').empty().append('<span> - </span>');
        }
    }
	jeedom.cmd.update['#doorLockState_id#']({display_value:'#doorLockState#'});	

		
	//----- Milage
	jeedom.cmd.update['#mileage_id#'] = function(_options) {
       $('.Cmd#mileage_id#').empty().append('<span>'+_options.display_value+'</span>');
    }
	jeedom.cmd.update['#mileage_id#']({display_value:'#mileage#'});

	//----- Commun aux véhicules
	jeedom.cmd.update['#beRemainingRangeTotal_id#'] = function(_options) {
		if (_options.display_value!=0){
			$('.Cmd#beRemainingRangeTotal_id#').empty().append('<span>'+_options.display_value+'</span>');
		} else {
			$('.Cmd#beRemainingRangeTotal_id#').empty().append('<span>---</span>');
		}
    }
	jeedom.cmd.update['#beRemainingRangeTotal_id#']({display_value:'#beRemainingRangeTotal#'});
		
	
	//----- Combustion engine
	jeedom.cmd.update['#beRemainingRangeFuelKm_id#'] = function(_options) {
		if (_options.display_value!=0){
			$('.Cmd#beRemainingRangeFuelKm_id#').empty().append('<span>'+_options.display_value+'</span>');
		} else {
			$('.Cmd#beRemainingRangeFuelKm_id#').empty().append('<span>---</span>');
		}
    }
	jeedom.cmd.update['#beRemainingRangeFuelKm_id#']({display_value:'#beRemainingRangeFuelKm#'});
	
	jeedom.cmd.update['#remaining_fuel_id#'] = function(_options) {
       	$('.Cmd#remaining_fuel_id#').empty().append('<span>'+_options.display_value+'</span>');
    }
	jeedom.cmd.update['#remaining_fuel_id#']({display_value:'#remaining_fuel#'});	
		
	
	//----- Electric engine
	jeedom.cmd.update['#beRemainingRangeElectric_id#'] = function(_options) {
		if (_options.display_value!=0){
			$('.Cmd#beRemainingRangeElectric_id#').empty().append('<span>'+_options.display_value+'</span>');
		} else {
			$('.Cmd#beRemainingRangeElectric_id#').empty().append('<span>---</span>');
		}
    }
	jeedom.cmd.update['#beRemainingRangeElectric_id#']({display_value:'#beRemainingRangeElectric#'});
		
	jeedom.cmd.update['#chargingLevelHv_id#'] = function(_options) {
		if (_options.display_value!=0){
			$('.Cmd#chargingLevelHv_id#').empty().append('<span>'+_options.display_value+'</span>');
		} else {
			$('.Cmd#chargingLevelHv_id#').empty().append('<span>---</span>');
		}
    }
	jeedom.cmd.update['#chargingLevelHv_id#']({display_value:'#chargingLevelHv#'});
		
	jeedom.cmd.update['#connectorStatus_id#'] = function(_options) {
       	if ( _options.display_value == "1" )  {			
			$('.Cmd#connectorStatus_id#').empty().append('<span>Connectée</span>');
		}
		if ( _options.display_value == "0" || _options.display_value == "" )  {			
			$('.Cmd#connectorStatus_id#').empty().append('<span>Deconnectée</span>');
		}
	}
	jeedom.cmd.update['#connectorStatus_id#']({display_value:'#connectorStatus#'});
			
	jeedom.cmd.update['#chargingStatus_id#'] = function(_options) {
       	if ( _options.display_value == "DEFAULT" || _options.display_value == "ERROR" )  {	
			$('.Cmd#chargingStatus_id#').empty().append('<span style="color:rgb(185,58,62) !important; font-weight:bold !important">{{Erreur}}</span>');
		}
		if ( _options.display_value == "CHARGING" )  {	
			$('.Cmd#chargingStatus_id#').empty().append('<span>En cours</span>');
		}
		if ( _options.display_value == "COMPLETE" || _options.display_value == "FULLY_CHARGED" || _options.display_value == "FINISHED_FULLY_CHARGED" )  {	
			$('.Cmd#chargingStatus_id#').empty().append('<span>{{Complète}}</span>');
		}
		if ( _options.display_value == "FINISHED_NOT_FULL" )  {	
			$('.Cmd#chargingStatus_id#').empty().append('<span>{{Interrompue}}</span>');
		}
		if ( _options.display_value == "NOT_CHARGING" )  {	
			$('.Cmd#chargingStatus_id#').empty().append('<span>{{Aucune}}</span>');
		}
		if ( _options.display_value == "PLUGGED_IN" )  {	
			$('.Cmd#chargingStatus_id#').empty().append('<span>{{Branchée}}</span>');
		}
		if ( _options.display_value == "WAITING_FOR_CHARGING" )  {	
			$('.Cmd#chargingStatus_id#').empty().append('<span>{{En attente}}</span>');
		}
		if ( _options.display_value == "TARGET_REACHED" )  {	
			$('.Cmd#chargingStatus_id#').empty().append('<span>{{Atteinte}}</span>');
		}
		if ( _options.display_value == "UNKNOWN" || _options.display_value == "INVALID" )  {	
			$('.Cmd#chargingStatus_id#').empty().append('<span> - </span>');
		}
	}
	jeedom.cmd.update['#chargingStatus_id#']({display_value:'#chargingStatus#'});
	
	jeedom.cmd.update['#chargingEndTime_id#'] = function(_options) {
		if ( _options.display_value != "not available" )  {
           	$('.Cmd#chargingEndTime_id#').empty().append('<span>{{Recharge terminée}}</br>(100%) à '+_options.display_value+'</span>');
        }
		else  {
			$('.Cmd#chargingEndTime_id#').empty().append('<span></span>');		
		}
	}
	jeedom.cmd.update['#chargingEndTime_id#']({display_value:'#chargingEndTime#'});
	
	
    //----- Doors
	jeedom.cmd.update['#allDoorsState_id#'] = function(_options) {
        if ( _options.display_value == "OPEN" )  {
           	$('.Cmd#allDoorsState_id#').empty().append('<span style="color:rgb(185,58,62) !important; font-weight:bold !important">{{Ouvert}}</span>');
		}
       	if ( _options.display_value == "CLOSED" )  {
           	$('.Cmd#allDoorsState_id#').empty().append('<span>{{Fermées}}</span>');
        }
		if ( _options.display_value == "UNKNOWN" || _options.display_value == "not available" )  {
           	$('.Cmd#allDoorsState_id#').empty().append('<span> - </span>');
        }
	}
	jeedom.cmd.update['#allDoorsState_id#']({display_value:'#allDoorsState#'});
		
	jeedom.cmd.update['#doorDriverFront_id#'] = function(_options) {
        if ( _options.display_value == "OPEN" || _options.display_value == "INTERMEDIATE" )  {
           	$('.Cmd#doorDriverFront_id#').empty().append('<span class="doors_text#id#" style="color:rgb(185,58,62) !important; font-weight:bold !important">{{Ouvert}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/doors_red.png" height="20px"></span>');
		}
       	if ( _options.display_value == "CLOSED" )  {
           	$('.Cmd#doorDriverFront_id#').empty().append('<span class="doors_text#id#" style="color:'+color_icon_closed_rgb+' !important;">{{fermée}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/doors_'+color_icon_closed+'.png" height="20px"></span>');
        }
		if ( _options.display_value == "UNKNOWN" || _options.display_value == "INVALID" || _options.display_value == "not available" )  {
           	$('.Cmd#doorDriverFront_id#').empty().append('<span> - </span>');
        }
	}
	jeedom.cmd.update['#doorDriverFront_id#']({display_value:'#doorDriverFront#'});

	jeedom.cmd.update['#doorDriverRear_id#'] = function(_options) {
        if ( _options.display_value == "OPEN" || _options.display_value == "INTERMEDIATE" )  {
           	$('.Cmd#doorDriverRear_id#').empty().append('<span class="doors_text#id#" style="color:rgb(185,58,62) !important; font-weight:bold !important">{{Ouvert}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/doors_red.png" height="20px"></span>');
		}
       	if ( _options.display_value == "CLOSED" )  {
           	$('.Cmd#doorDriverRear_id#').empty().append('<span class="doors_text#id#" style="color:'+color_icon_closed_rgb+' !important;">{{fermée}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/doors_'+color_icon_closed+'.png" height="20px"></span>');
        }
		if ( _options.display_value == "UNKNOWN" || _options.display_value == "INVALID" || _options.display_value == "not available" )  {
           	$('.Cmd#doorDriverRear_id#').empty().append('<span> - </span>');
        }
	}
	jeedom.cmd.update['#doorDriverRear_id#']({display_value:'#doorDriverRear#'});

	jeedom.cmd.update['#doorPassengerFront_id#'] = function(_options) {
        if ( _options.display_value == "OPEN" || _options.display_value == "INTERMEDIATE" )  {
           	$('.Cmd#doorPassengerFront_id#').empty().append('<span class="doors_text#id#" style="color:rgb(185,58,62) !important; font-weight:bold !important">{{Ouvert}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/doors_red.png" height="20px"></span>');
        }
       	if ( _options.display_value == "CLOSED" )  {
           	$('.Cmd#doorPassengerFront_id#').empty().append('<span class="doors_text#id#" style="color:'+color_icon_closed_rgb+' !important;">{{fermée}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/doors_'+color_icon_closed+'.png" height="20px"></span>');
        }
		if ( _options.display_value == "UNKNOWN" || _options.display_value == "INVALID" || _options.display_value == "not available" )  {
           	$('.Cmd#doorPassengerFront_id#').empty().append('<span> - </span>');
        }
	}
	jeedom.cmd.update['#doorPassengerFront_id#']({display_value:'#doorPassengerFront#'});
	
	jeedom.cmd.update['#doorPassengerRear_id#'] = function(_options) {
        if ( _options.display_value == "OPEN" || _options.display_value == "INTERMEDIATE" )  {
           	$('.Cmd#doorPassengerRear_id#').empty().append('<span class="doors_text#id#" style="color:rgb(185,58,62) !important; font-weight:bold !important">{{Ouvert}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/doors_red.png" height="20px"></span>');
        }
       	if ( _options.display_value == "CLOSED" )  {
           	$('.Cmd#doorPassengerRear_id#').empty().append('<span class="doors_text#id#" style="color:'+color_icon_closed_rgb+' !important;">{{fermée}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/doors_'+color_icon_closed+'.png" height="20px"></span>');
        }
		if ( _options.display_value == "UNKNOWN" || _options.display_value == "INVALID" || _options.display_value == "not available" )  {
           	$('.Cmd#doorPassengerRear_id#').empty().append('<span> - </span>');
        }
	}
	jeedom.cmd.update['#doorPassengerRear_id#']({display_value:'#doorPassengerRear#'});

	jeedom.cmd.update['#trunk_state_id#'] = function(_options) {
        if ( _options.display_value == "OPEN" || _options.display_value == "INTERMEDIATE" )  {
           	$('.Cmd#trunk_state_id#').empty().append('<span class="doors_text#id#" style="color:rgb(185,58,62) !important; font-weight:bold !important">{{Ouvert}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/doors_red.png" height="20px"></span>');
        }
       	if ( _options.display_value == "CLOSED" )  {
           	$('.Cmd#trunk_state_id#').empty().append('<span class="doors_text#id#" style="color:'+color_icon_closed_rgb+' !important;">{{Fermé}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/doors_'+color_icon_closed+'.png" height="20px"></span>');
        }
		if ( _options.display_value == "UNKNOWN" || _options.display_value == "INVALID" || _options.display_value == "not available" )  {
           	$('.Cmd#trunk_state_id#').empty().append('<span> - </span>');
        }
	}
	jeedom.cmd.update['#trunk_state_id#']({display_value:'#trunk_state#'});

	jeedom.cmd.update['#hood_state_id#'] = function(_options) {
        if ( _options.display_value == "OPEN" || _options.display_value == "INTERMEDIATE" )  {
           	$('.Cmd#hood_state_id#').empty().append('<span class="doors_text#id#" style="color:rgb(185,58,62) !important; font-weight:bold !important">{{Ouvert}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/doors_red.png" height="20px"></span>');
        }
       	if ( _options.display_value == "CLOSED" )  {
           	$('.Cmd#hood_state_id#').empty().append('<span class="doors_text#id#" style="color:'+color_icon_closed_rgb+' !important;">{{Fermé}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/doors_'+color_icon_closed+'.png" height="20px"></span>');
        }
		if ( _options.display_value == "UNKNOWN" || _options.display_value == "INVALID" || _options.display_value == "not available" )  {
           	$('.Cmd#hood_state_id#').empty().append('<span> - </span>');
        }
	}
	jeedom.cmd.update['#hood_state_id#']({display_value:'#hood_state#'});


	//----- Windows
	jeedom.cmd.update['#allWindowsState_id#'] = function(_options) {
        if ( _options.display_value == "OPEN" )  {
           	$('.Cmd#allWindowsState_id#').empty().append('<span style="color:rgb(185,58,62) !important; font-weight:bold !important">{{Ouvert}}</span>');
		}
       	if ( _options.display_value == "CLOSED" )  {
           	$('.Cmd#allWindowsState_id#').empty().append('<span>{{Fermées}}</span>');
        }
		if ( _options.display_value == "UNKNOWN" || _options.display_value == "not available" )  {
           	$('.Cmd#allWindowsState_id#').empty().append('<span> - </span>');
        }
	}
	jeedom.cmd.update['#allWindowsState_id#']({display_value:'#allWindowsState#'});

	jeedom.cmd.update['#windowDriverFront_id#'] = function(_options) {
        if ( _options.display_value == "OPEN" || _options.display_value == "INTERMEDIATE" )  {
           	$('.Cmd#windowDriverFront_id#').empty().append('<span class="doors_text#id#" style="color:rgb(185,58,62) !important; font-weight:bold !important">{{Ouvert}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/windows_red.png" height="20px"></span>');
        }
       	if ( _options.display_value == "CLOSED" )  {
           	$('.Cmd#windowDriverFront_id#').empty().append('<span class="doors_text#id#" style="color:'+color_icon_closed_rgb+' !important;">{{fermée}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/windows_'+color_icon_closed+'.png" height="20px"></span>');
        }
		if ( _options.display_value == "UNKNOWN" || _options.display_value == "INVALID" || _options.display_value == "not available" )  {
           	$('.Cmd#windowDriverFront_id#').empty().append('<span> - </span>');
        }
	}
	jeedom.cmd.update['#windowDriverFront_id#']({display_value:'#windowDriverFront#'});

	jeedom.cmd.update['#windowDriverRear_id#'] = function(_options) {
        if ( _options.display_value == "OPEN" || _options.display_value == "INTERMEDIATE" )  {
           	$('.Cmd#windowDriverRear_id#').empty().append('<span class="doors_text#id#" style="color:rgb(185,58,62) !important; font-weight:bold !important">{{Ouvert}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/windows_red.png" height="20px"></span>');
        }
       	if ( _options.display_value == "CLOSED" )  {
           	$('.Cmd#windowDriverRear_id#').empty().append('<span class="doors_text#id#" style="color:'+color_icon_closed_rgb+' !important;">{{fermée}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/windows_'+color_icon_closed+'.png" height="20px"></span>');
        }
		if ( _options.display_value == "UNKNOWN" || _options.display_value == "INVALID" || _options.display_value == "not available" )  {
           	$('.Cmd#windowDriverRear_id#').empty().append('<span> - </span>');
		}
	}
	jeedom.cmd.update['#windowDriverRear_id#']({display_value:'#windowDriverRear#'});

	jeedom.cmd.update['#windowPassengerFront_id#'] = function(_options) {
        if ( _options.display_value == "OPEN" || _options.display_value == "INTERMEDIATE" )  {
           	$('.Cmd#windowPassengerFront_id#').empty().append('<span class="doors_text#id#" style="color:rgb(185,58,62) !important; font-weight:bold !important">{{Ouvert}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/windows_red.png" height="20px"></span>');
        }
       	if ( _options.display_value == "CLOSED" )  {
           	$('.Cmd#windowPassengerFront_id#').empty().append('<span class="doors_text#id#" style="color:'+color_icon_closed_rgb+' !important;">{{fermée}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/windows_'+color_icon_closed+'.png" height="20px"></span>');
        }
		if ( _options.display_value == "UNKNOWN" || _options.display_value == "INVALID" || _options.display_value == "not available" )  {
           	$('.Cmd#windowPassengerFront_id#').empty().append('<span> - </span>');
        }
	}
	jeedom.cmd.update['#windowPassengerFront_id#']({display_value:'#windowPassengerFront#'});
	
	jeedom.cmd.update['#windowPassengerRear_id#'] = function(_options) {
        if ( _options.display_value == "OPEN" || _options.display_value == "INTERMEDIATE" )  {
           	$('.Cmd#windowPassengerRear_id#').empty().append('<span class="doors_text#id#" style="color:rgb(185,58,62) !important; font-weight:bold !important">{{Ouvert}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/windows_red.png" height="20px"></span>');
        }
       	if ( _options.display_value == "CLOSED" )  {
           	$('.Cmd#windowPassengerRear_id#').empty().append('<span class="doors_text#id#" style="color:'+color_icon_closed_rgb+' !important;">{{fermée}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/windows_'+color_icon_closed+'.png" height="20px"></span>');
        }
		if ( _options.display_value == "UNKNOWN" || _options.display_value == "INVALID" || _options.display_value == "not available" )  {
           	$('.Cmd#windowPassengerRear_id#').empty().append('<span> - </span>');
		}
	}
	jeedom.cmd.update['#windowPassengerRear_id#']({display_value:'#windowPassengerRear#'});

	jeedom.cmd.update['#moonroof_state_id#'] = function(_options) {
        if ( _options.display_value == "OPEN" || _options.display_value == "INTERMEDIATE" )  {
           	$('.Cmd#moonroof_state_id#').empty().append('<span class="doors_text#id#" style="color:rgb(185,58,62) !important; font-weight:bold !important">{{Ouvert}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/windows_red.png" height="20px"></span>');
        }
       	if ( _options.display_value == "CLOSED" )  {
           	$('.Cmd#moonroof_state_id#').empty().append('<span class="doors_text#id#" style="color:'+color_icon_closed_rgb+' !important;">{{Fermé}}</span><span class="doors_icon#id#"><img src="plugins/myToyota/core/img/windows_'+color_icon_closed+'.png" height="20px"></span>');
        }
		if ( _options.display_value == "UNKNOWN" || _options.display_value == "INVALID" || _options.display_value == "not available" )  {
           	$('.Cmd#moonroof_state_id#').empty().append('<span> - </span>');
        }
	}
	jeedom.cmd.update['#moonroof_state_id#']({display_value:'#moonroof_state#'});

	
	//----- Tires
	jeedom.cmd.update['#tireFrontLeft_target_id#'] = function(_options) {
        $('.Cmd#tireFrontLeft_target_id#').empty().append('<span title="{{Consigne gonflage :}} '+_options.display_value+' bar"><span class="Cmd#tireFrontLeft_pressure_id#"></span></span>');
    }
	jeedom.cmd.update['#tireFrontLeft_target_id#']({display_value:'#tireFrontLeft_target#'});
	
	jeedom.cmd.update['#tireFrontLeft_pressure_id#'] = function(_options) {
        if ( _options.display_value == 0 )  {
			$('.pressure_info#id#').hide();
		}
		else  { 
			$('.Cmd#tireFrontLeft_pressure_id#').empty().append('<span>'+_options.display_value+' bar</span>');
		}
    }
	jeedom.cmd.update['#tireFrontLeft_pressure_id#']({display_value:'#tireFrontLeft_pressure#'});
	
	jeedom.cmd.update['#tireFrontRight_target_id#'] = function(_options) {
        $('.Cmd#tireFrontRight_target_id#').empty().append('<span title="{{Consigne gonflage :}} '+_options.display_value+' bar"><span class="Cmd#tireFrontRight_pressure_id#"></span></span>');
    }
	jeedom.cmd.update['#tireFrontRight_target_id#']({display_value:'#tireFrontRight_target#'});
	
	jeedom.cmd.update['#tireFrontRight_pressure_id#'] = function(_options) {
        $('.Cmd#tireFrontRight_pressure_id#').empty().append('<span>'+_options.display_value+' bar</span>');
    }
	jeedom.cmd.update['#tireFrontRight_pressure_id#']({display_value:'#tireFrontRight_pressure#'});
	
	jeedom.cmd.update['#tireRearLeft_target_id#'] = function(_options) {
        $('.Cmd#tireRearLeft_target_id#').empty().append('<span title="{{Consigne gonflage :}} '+_options.display_value+' bar"><span class="Cmd#tireRearLeft_pressure_id#"></span></span>');
    }
	jeedom.cmd.update['#tireRearLeft_target_id#']({display_value:'#tireRearLeft_target#'});
	
	jeedom.cmd.update['#tireRearLeft_pressure_id#'] = function(_options) {
        $('.Cmd#tireRearLeft_pressure_id#').empty().append('<span>'+_options.display_value+' bar</span>');
    }
	jeedom.cmd.update['#tireRearLeft_pressure_id#']({display_value:'#tireRearLeft_pressure#'});
	
	jeedom.cmd.update['#tireRearRight_target_id#'] = function(_options) {
        $('.Cmd#tireRearRight_target_id#').empty().append('<span title="{{Consigne gonflage : }}'+_options.display_value+' bar"><span class="Cmd#tireRearRight_pressure_id#"></span></span>');
    }
	jeedom.cmd.update['#tireRearRight_target_id#']({display_value:'#tireRearRight_target#'});
	
	jeedom.cmd.update['#tireRearRight_pressure_id#'] = function(_options) {
        $('.Cmd#tireRearRight_pressure_id#').empty().append('<span>'+_options.display_value+' bar</span>');
    }
	jeedom.cmd.update['#tireRearRight_pressure_id#']({display_value:'#tireRearRight_pressure#'});


	//----- Services
	jeedom.cmd.update['#vehicleMessages_id#'] = function(_options) {
       	var messages = json_decode(_options.display_value);
		var table_html= "";
		//table_html += '<table style="overflow:hidden;table-layout:fixed;">';
/*		table_html += '<thead><tr class="myToyota_service_tr">';
		table_html += '<th class="myToyota_service_th" style="width: 10%; height: 25px; padding-left: 2px;">Messages :</th>';
		table_html += '</tr></thead>';
		table_html += '<tfoot>';
		table_html += '<tr>';
		table_html += '<td class="myToyota_service_td"><span class="myToyota_service_td form-control input-sm" style="background-color: transparent !important; text-align:left; padding-left: 2px;">Passage(s) au garage :</span></td>';
		table_html += '</tr>';
*/		
		table_html += '<ul class="list-group" style="text-align: left">';
		nbmessages = count(messages);
		if (nbmessages == 0){
			table_html += '<li class="list-group-item" style="margin-bottom: 10px; padding: 0px 0px 5px 0px; text-align: center;"><span class="label cmdName"> {{Aucun message}} </span><br/>';
		}
		for (message in messages){
			//var trajets = JSON.parse(_options.display_value);
			console.log('-------- Tab services -----' + message);
			if (messages[message].categorie == 'HSC'){
				cat = 'Bilan de santé Hybride';
			}else if (messages[message].categorie == 'VDE'){
				cat = 'Livraison véhicule';
			}else if (messages[message].categorie == 'MNT'){
				cat = 'Entretien';
			}else{
				cat = messages[message].categorie;
			}
			if (messages[message].compteur != ''){
				km = messages[message].compteur
			}else{
				km = 0;
			}
			table_html += '<li class="list-group-item" style="margin-bottom: 10px; padding: 0px 0px 5px 0px"><span class="label cmdName">';
			table_html += 'Le ' + messages[message].date+' à ' + km+' km : ' + cat + '</span><br/>';
			table_html += '<span class="label cmdName" style="padding-left: 100px;">par ' + messages[message].garage + '</span></li>';
/*			table_html += '<tr>';
			table_html += '<td class="myToyota_service_td"><span class="myToyota_service_td form-control input-sm" style="background-color: transparent !important; text-align:left; width:430px;">';
			table_html += 'Le ' + messages[message].date+' à ' + messages[message].compteur+' km : ' + cat + '</span></td>';
			table_html += '</tr>';
			table_html += '<tr>';
			table_html += '<td class="myToyota_service_td"><span class="myToyota_service_td form-control input-sm" style="background-color: transparent !important; text-align:left; width:430px;padding-left: 75px;">';
			table_html += ' par ' + messages[message].garage + '</span></td>';
			table_html += '</tr>';
*/		};
		table_html += '</tfoot>';
		$('.table_message#id#').empty().append(table_html);
	};
	jeedom.cmd.update['#vehicleMessages_id#']({display_value:'#services#'});
	
	//----- Messages // sera à compléter avec les infos qui me seront fournies // voir mytoyota_panel
	jeedom.cmd.update['#vehicleMessages_id#'] = function(_options) {
       	var messages = json_decode(_options.display_value);
		for (message in messages){
			//var trajets = JSON.parse(_options.display_value);
			console.log('-------- icones -----' + message);
			if ( message.type == "ENGINE_OIL" ) {
				if ( (message.severity == "LOW" && message.description != '') || message.severity == "MEDIUM" ) { $('.icon_oil#id#').empty().append('<img src="plugins/myToyota/core/img/oil_orange.png" height="50" title="{{Huile moteur - Criticité :}} '+message.severity+'<br/>'+message.description+'">'); }
				if ( message.severity == "HIGH" || message.severity == "CRITICAL" ) { $('.icon_oil#id#').empty().append('<img src="plugins/myToyota/core/img/oil_red.png" height="50" title="{{Huile moteur - Criticité :}} '+message.severity+'<br/>'+message.description+'">'); }
			}
			$('.icon_brake#id#').empty();
			$('.icon_tire#id#').empty();
			$('.icon_washingfluid#id#').empty();
			$('.icon_vehicle#id#').empty()
		};
	};
	jeedom.cmd.update['#vehicleMessages_id#']({display_value:'#vehicleMessages#'});
	

	//------ Charts
    function formattedDate(d = new Date) { 				
        let hours = String(d.getHours());
        let minutes = String(d.getMinutes());
        let month = String(d.getMonth() + 1);
        let day = String(d.getDate());
        let year = String(d.getFullYear());
        
        if (minutes.length < 2) minutes = '0' + minutes;
        if (month.length < 2) month = '0' + month;
        if (day.length < 2) day = '0' + day;

        //return `${hours}h ${minutes} - ${day}/${month}/${year}`;
		return `${day}/${month}/${year}`;
    }

    function formattedDateForCode(d = new Date) { 		// formate une date pour l'utiliser dans la fonction jeedom.history.get()
        let month = String(d.getMonth() + 1);
        let day = String(d.getDate());
        let year = String(d.getFullYear());

        if (month.length < 2) month = '0' + month;
        if (day.length < 2) day = '0' + day;

        return `${year}-${month}-${day}`;
      }

	var date=[];
	var date2=[];
	var date3=[];
    var dateFin = new Date();
	dateFin = formattedDateForCode(dateFin);
    var dateDebut = new Date();
	dateDebut.setDate(dateDebut.getDate() - 60);		// Historique sur les 60 derniers jours
	dateDebut = formattedDateForCode(dateDebut);
        
	var km_chart#id# = new Highcharts.chart('km_chart#id#', {
        
		chart: {
            zoomType: 'x',
			marginLeft: 80,
        },
        title: {
            text: '{{Kilométrage véhicule}}',
			align: 'left',
			style: {
				color: 'white',
			}
        },
        yAxis: {
            title: {
	            text: "km"
            }
        },
        xAxis: {
            type: 'datetime',
		},
        legend: {
                enabled: false
        },
		plotOptions: {
            area: {
                fillColor: {
                	linearGradient: {
                        x1: 0,
                        y1: 0,
                        x2: 0,
                        y2: 1
                    },
                    stops: [
                    	[0, "#5078aa"],
                        [1, Highcharts.color("#5078aa").setOpacity(0).get('rgba')]
                    ]
                },
                marker: {
                    radius: 2,
					enabled: false,
				},
                lineWidth: 1,
				lineColor: "#5078aa",
                states: {
                    hover: {
                        lineWidth: 1
                    }
                },
                threshold: null
			}
        },
        series: [
            {
				type: 'area',
				name: "{{Kilométrage}}",
				data: [],
				tooltip: {
					valueSuffix: ' km'
          		}
       		}
        ],
		credits: {
			enabled: false
		}
    });

	var fuel_chart#id# = new Highcharts.chart('fuel_chart#id#', {
        
		chart: {
            zoomType: 'x',
			marginLeft: 80,
        },
        title: {
            text: '{{Niveau carburant}}',
			align: 'left',
			style: {
				color: 'white',
			}
        },
        yAxis: {
            title: {
	            text: '%'
            }
        },
        xAxis: {
            type: 'datetime',
		},
        legend: {
                enabled: false
        },
		plotOptions: {
            area: {
                fillColor: {
                	linearGradient: {
                        x1: 0,
                        y1: 0,
                        x2: 0,
                        y2: 1
                    },
                    stops: [
                    	[0, "#5078aa"],
                        [1, Highcharts.color("#5078aa").setOpacity(0).get('rgba')]
                    ]
                },
                marker: {
                    radius: 2,
					enabled: false,
				},
                lineWidth: 1,
				lineColor: "#5078aa",
                states: {
                    hover: {
                        lineWidth: 1
                    }
                },
                threshold: null
			}
        },
        series: [
            {
				type: 'area',
				name: "{{Niveau carburant}}",
				data: [],
				tooltip: {
					valueSuffix: ' %'
          		}
       		}
        ],
		credits: {
			enabled: false
		}
    });

	var charge_chart#id# = new Highcharts.chart('charge_chart#id#', {
        
		chart: {
            zoomType: 'x',
			marginLeft: 80,
			
        },
        title: {
            text: '{{Charge restante}}',
			align: 'left',
			style: {
				color: 'white',
			}
        },
        yAxis: {
            title: {
	            text: "{{% restant}}"
            }
        },
        xAxis: {
            type: 'datetime',
		},
		legend: {
                enabled: false
        },
        plotOptions: {
            area: {
                fillColor: {
                	linearGradient: {
                        x1: 0,
                        y1: 0,
                        x2: 0,
                        y2: 1
                    },
                    stops: [
                    	[0, "#5078aa"],
                        [1, Highcharts.color("#5078aa").setOpacity(0).get('rgba')]
                    ]
                },
                marker: {
                    radius: 2,
					enabled: false,
				},
                lineWidth: 1,
				lineColor: "#5078aa",
                states: {
                    hover: {
                        lineWidth: 1
                    }
                },
                threshold: null
			}
        },
        series: [
            {
				type: 'area',
				name: "{{Charge restante}}",
				data: [],
				tooltip: {
					valueSuffix: ' %'
          		}	
       		}
        ],
		credits: {
			enabled: false
		}
    });
	
	jeedom.history.get ({
    	cmd_id: '#mileage_id#',
        dateStart: dateDebut, 
        dateEnd: dateFin,
        success:  function(result) {
        	for(let i = 0; i<result.data.length; i++) {
                km_chart#id#.series[0].addPoint(result.data[i][1], false) 	// false permet de ne pas redesiner le chart à chaque ajout
            	date.push(formattedDate(new Date(result.data[i][0])))
          	}
          	km_chart#id#.redraw();
          	km_chart#id#.xAxis[0].setCategories(date);
        }
    });

	jeedom.history.get ({
    	cmd_id: '#remaining_fuel_id#',
        dateStart: dateDebut, 
        dateEnd: dateFin,
        success:  function(result) {
        	for(let i = 0; i<result.data.length; i++) {
                fuel_chart#id#.series[0].addPoint(result.data[i][1], false) 	// false permet de ne pas redesiner le chart à chaque ajout
            	date2.push(formattedDate(new Date(result.data[i][0])))
          	}
          	fuel_chart#id#.redraw();
          	fuel_chart#id#.xAxis[0].setCategories(date2);
        }
    });

	jeedom.history.get ({
    	cmd_id: '#chargingLevelHv_id#',
        dateStart: dateDebut, 
        dateEnd: dateFin,
        success:  function(result) {
        	for(let i = 0; i<result.data.length; i++) {
                charge_chart#id#.series[0].addPoint(result.data[i][1], false) // false permet de ne pas redesiner le chart à chaque ajout
            	date3.push(formattedDate(new Date(result.data[i][0])))
          	}
          	charge_chart#id#.redraw();
          	charge_chart#id#.xAxis[0].setCategories(date3);
        }
    });


	//----- Statistics
	jeedom.cmd.update['#totalEnergyCharged_id#'] = function(_options) {
		$('.Cmd#totalEnergyCharged_id#').empty().append('<span>{{Charge totale : ~}} '+_options.display_value+' kWh</span>');
	}
	jeedom.cmd.update['#totalEnergyCharged_id#']({display_value:'#totalEnergyCharged#'});

/*	jeedom.cmd.update['#chargingSessions_id#'] = function(_options) {
       	var sessions = jQuery.parseJSON(_options.display_value);
		var table_html= "";
		table_html += '<thead><tr>';
		table_html += '<th style="width: 15%; height: 25px; padding-left: 12px;">{{Date}}</th>';
		table_html += '<th style="width: 15%; height: 25px; padding-left: 12px;">{{Charge}}</th>';
		table_html += '<th style="width: 15%; height: 25px; padding-left: 12px;">{{Durée}}</th>';
		table_html += '<th style="width: 15%; height: 25px; padding-left: 12px;">{{Coût}}</th>';
		table_html += '<th style="width: 40%; height: 25px; padding-left: 12px;">{{Lieu}}</th>';
		table_html += '</tr></thead>';
		table_html += '<tbody>';
		jQuery.each(sessions,function(key,session){
			table_html += '<tr>'
			table_html += '<td><input type="text" class="eqLogicAttr form-control input-sm" style="background-color: transparent !important;" value="'+session.date+'" readonly="true"></td>'
			table_html += '<td><input type="text" class="eqLogicAttr form-control input-sm" style="background-color: transparent !important;" value="'+session.energyCharged+'" readonly="true"></td>'
			table_html += '<td><input type="text" class="eqLogicAttr form-control input-sm" style="background-color: transparent !important;" value="'+session.time+'" readonly="true"></td>'
			table_html += '<td><input type="text" class="eqLogicAttr form-control input-sm" style="background-color: transparent !important;" value="'+session.cost+'" readonly="true"></td>'
			table_html += '<td><input type="text" class="eqLogicAttr form-control input-sm" style="background-color: transparent !important;" value="'+session.address+'" readonly="true"></td>'
			table_html += '</tr>'
		});
		table_html += '</tbody>';
		$('.table_sessions#id#').empty().append(table_html);
	}
	jeedom.cmd.update['#chargingSessions_id#']({display_value:'#chargingSessions#'});
*/


	//------ Stat et trajets
	jeedom.cmd.update['#moy_sem_id#'] = function(_options) {
			$(function() {
				var x = JSON.parse(_options.display_value);
				if (x.duree_tot!=undefined){
					$('.FONC_hyd_trajets').empty().append('<span>'+x.nb_trajets+'</span>');
					$('.FONC_hyd_duree_totale').empty().append('<span>'+x.duree_tot+'</span>'); //
					$('.FONC_hyd_distance_totale').empty().append('<span>'+x.distance_tot+'</span>'); //
					$('.FONC_hyd_vitesse_moyenne').empty().append('<span>'+x.vit_moy+'</span>'); //
					$('.FONC_hyd_duree_ev').empty().append('<span>'+x.duree_ev+'</span>'); //
					$('.FONC_hyd_distance_ev').empty().append('<span>'+x.distance_ev+'</span>'); //
					$('.FONC_hyd_conso_essence').empty().append('<span>'+x.conso_essence+'</span>'); 
					$('.FONC_hyd_conso_moy').empty().append('<span>'+x.conso_moy+'</span>'); 
				}
			});
		}
		jeedom.cmd.update['#moy_sem_id#']({display_value:'#moy_sem#'});	

		jeedom.cmd.update['#trajets_id#'] = function(_options) {
			$(function() {
				var trajets = JSON.parse(_options.display_value);

				var table_html= "";
				table_html += '<thead><tr class="myToyota_stat_tr">';
				table_html += '<th class="myToyota_stat_th" style="width: 15%; height: 25px; padding-left: 12px;">{{Début (cliquer pour voir)}}</th>';
				table_html += '<th class="myToyota_stat_th" style="width: 10%; height: 25px; padding-left: 12px;">{{Durée}}</th>';
				table_html += '<th class="myToyota_stat_th" style="width: 10%; height: 25px; padding-left: 12px;">{{Distance}}</th>';
				table_html += '<th class="myToyota_stat_th" style="width: 10%; height: 25px; padding-left: 12px;">{{Vit. moyenne}}</th>';
				table_html += '<th class="myToyota_stat_th" style="width: 10%; height: 25px; padding-left: 12px;">{{Temps en ev}}</th>';
				table_html += '<th class="myToyota_stat_th" style="width: 10%; height: 25px; padding-left: 12px;">{{Distance en ev}}</th>';
				table_html += '<th class="myToyota_stat_th" style="width: 10%; height: 25px; padding-left: 12px;">{{Conso Carburant}}</th>';
				table_html += '<th class="myToyota_stat_th" style="width: 10%; height: 25px; padding-left: 12px;">{{Moyenne de conso}}</th>';
				table_html += '</tr></thead>';
				table_html += '<tbody>';
				for(trajet in trajets){
					console.log('-------- Tab cmd HYD -----' + trajet);
					table_html += '<tr>'
					table_html += '<td class="myToyota_stat_td"><span class="myToyota_stat_td form-control input-sm" style="background-color: transparent !important;"><a href="index.php?v=d&plugin=myToyota&modal=AfficheTrajetMap.myToyota&eqLogic_id="'+'"#id#">'+trajets[trajet].debut_trajet+'</a></span></td>';
					table_html += '<td class="myToyota_stat_td"><span class="myToyota_stat_td form-control input-sm" style="background-color: transparent !important;">'+trajets[trajet].duree_tot+'</span></td>';
					table_html += '<td class="myToyota_stat_td"><span class="myToyota_stat_td form-control input-sm" style="background-color: transparent !important;">'+trajets[trajet].distance_tot+' km</span></td>';
					table_html += '<td class="myToyota_stat_td"><span class="myToyota_stat_td form-control input-sm" style="background-color: transparent !important;">'+trajets[trajet].vit_moy+' km/h</span></td>';
					table_html += '<td class="myToyota_stat_td"><span class="myToyota_stat_td form-control input-sm" style="background-color: transparent !important;">'+trajets[trajet].duree_ev+'</span></td>';
					table_html += '<td class="myToyota_stat_td"><span class="myToyota_stat_td form-control input-sm" style="background-color: transparent !important;">'+trajets[trajet].distance_ev+' km</span></td>';
					table_html += '<td class="myToyota_stat_td"><span class="myToyota_stat_td form-control input-sm" style="background-color: transparent !important;">'+trajets[trajet].conso_essence+' litre(s)</span></td>';
					table_html += '<td class="myToyota_stat_td"><span class="myToyota_stat_td form-control input-sm" style="background-color: transparent !important;">'+trajets[trajet].conso_moy+' l/100km</span></td>';;
					table_html += '</tr>';
				};
				table_html += '</tbody>';
				$('.tableCmdHyd').empty().append(table_html);
			});
		}
		jeedom.cmd.update['#trajets_id#']({display_value:'#trajets#'});	


	//----- Last update
	jeedom.cmd.update['#lastUpdate_id#'] = function(_options) {
			if ( _options.display_value == "not available")  { 
				$('.Cmd#lastUpdate_id#').empty().append('<span>'+"{{inconnue}}"+'</span>');
			}
			else { $('.Cmd#lastUpdate_id#').empty().append('<span>'+_options.display_value+'</span>'); 
			}
		}
		jeedom.cmd.update['#lastUpdate_id#']({display_value:'#lastUpdate#'});	

	//----- Last communication
	jeedom.cmd.update['#lastCommunication_id#'] = function(_options) {
			if ( _options.display_value == "not available")  { 
				$('.Cmd#lastCommunication_id#').empty().append('<span>'+"{{inconnue}}"+'</span>');
			} else { 
				var now = new Date().getTime();
				var comm = new Date(_options.display_value).getTime();
				const options = {
					year: 'numeric',
					month: '2-digit',
					day: '2-digit',
					hour: '2-digit',
					minute: '2-digit',
					second: '2-digit'
				};
				if (comm < now - 2100000) { // 35 minutes en millisecondes
					$('.Cmd#lastCommunication_id#').empty().append('<span style="color:rgb(185,58,62) !important; font-weight:bold !important">'+new Date(comm).toLocaleString('fr-FR', options)+'</span>');
				} else {
					$('.Cmd#lastCommunication_id#').empty().append('<span>'+new Date(comm).toLocaleString('fr-FR', options)+'</span>'); 
				}
			}
		}
		jeedom.cmd.update['#lastCommunication_id#']({display_value:'#lastCommunication#'});	


	//--'ional parameters
	setDoorsWindowsDisplay#id#();
	

	</script>

	<style>
	.highcharts-root {
		font-family: Roboto !important;
    }
	.highcharts-title {
		font-size: 22px !important;
    }
	</style>
	

</div>